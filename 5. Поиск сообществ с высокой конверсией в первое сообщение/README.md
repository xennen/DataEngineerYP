# **Поиск сообществ с высокой конверсией в первое сообщение**

![Airflow](https://img.shields.io/badge/-Airflow-orange)
![S3](https://img.shields.io/badge/-S3-orange)
![Vertica](https://img.shields.io/badge/-Vertica-grey)
![Python](https://img.shields.io/badge/-Python-blue)
![ETL](https://img.shields.io/badge/-ETL-green)
![Data_Vault](https://img.shields.io/badge/-Data_Vault-salad)

### **Описание задачи**

Чтобы привлечь новых пользователей, маркетологи хотят разместить на сторонних сайтах рекламу сообществ с высокой
активностью. Нужно определить группы, в которых начала общаться большая часть их участников. 
В терминологии маркетинга их бы назвали пабликами с высокой конверсией в первое сообщение.

**Необходимо**:

1. Перенести из S3 в staging-слой новые данные о входе и выходе пользователей из групп — файл group_log.csv.
2. Создать в слое постоянного хранения таблицы для новых данных.
3. Перенести новые данные из staging-области в слой DDS.
4. Рассчитать конверсию в первое сообщение из вступления в группу для десяти самых старых групп — group_conversion.

   
### **Порядок работы ETL скрипта:**

1. Загружаются csv файлы из хранилища S3 в локальную файловую систему оркестратора;
2. csv файлы загружаются в соответствующие таблицы stage слоя;
3. Из stage слоя загружаются таблицы хабов, генерируются хеш идентификаторы хабов;
4. Из stage и таблиц хабов загружаются таблицы связи;
5. Из stage и таблиц хабов загружаются таблицы сателлиты.

### **Использованные технологии:**

- **`Apache Airflow`**
- **`S3`**
- **`Vertica`**
- **`Python`**
- **`ETL`**
- **`Data Vault`**

### **Структура репозитория**

- `/src/dags` - DAG для реализации ETL из S3 в Vertica.
- `/src/dags/sql` - SQL-скрипты для DAG-а.
- `/src/sql` - SQL-скрипты для создания нужных таблиц в Data Vault.
- `/src/data` - csv файлы которые мы получаем из S3.
